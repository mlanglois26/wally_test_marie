<% flats.each do |flat| %>
  <div class="col-3 mb-3 mt-3">
      <div class="flat-card h-100">
        <%= link_to flat_path(flat), class:"text-decoration-none" do %>
          <div class="flat-image">
            <% if flat.photos.attached? %>
              <div id="carouselExample-<%=flat.id%>" class="carousel slide" data-bs-interval="false">

                <div class="carousel-inner">
                  <% flat.photos.each_with_index do |photo, index| %>
                    <div class="carousel-item  <%= "active" if index == 0%>">
                      <%= cl_image_tag photo.key, class:"card-img-top", style:"height: 306px;object-fit: cover;" %>
                    </div>
                  <% end %>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample-<%=flat.id%>" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample-<%=flat.id%>" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class = "visually-hidden">Next</span>
                </button>

              </div>
            <% else %>
              <img src="https://res.cloudinary.com/djumrtj1m/image/upload/v1713007814/test_wally_1_uqqgww.jpg" class="card-img-top" alt="...">

        </div>

          <div class="flat-description">
            <span class="flat-name"><%= flat.name.capitalize %></span>
            <span>Owner: <%= flat.user.first_name.capitalize %></span>
            <span><strong><%= flat.price_per_night %> €</strong> per day</span>

          </div>
        <% end %>
        <!--
        <div class="card-body">
          <strong class="h4"><%= product.name.capitalize %></strong>
          <p class = "text-info" ><strong class="display-5"><%= product.price_per_day %></strong>€/day</p>
        </div>
        -->
        <!--<div class = "d-flex justify-content-between ps-3 pe-3 pb-2 mt-0">
          <%= link_to "Edit", edit_product_path(product), class:"text-decoration-none text-muted" %>
          <%= link_to "Delete", product_path(product), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class:"text-decoration-none text-muted" %>
        </div>-->
      </div>
  </div>
<% end %>
